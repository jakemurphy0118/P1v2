#include "S1DetectorConstruction.hh"

#include "G4Material.hh"
#include "G4Element.hh"
#include "G4NistManager.hh"
#include "G4LogicalVolume.hh"
#include "G4SystemOfUnits.hh"
#include "G4Box.hh"
#include "G4PVPlacement.hh"
#include "G4LogicalVolume.hh"
#include "G4ThreeVector.hh"
#include "G4Orb.hh"

S1DetectorConstruction::S1DetectorConstruction()
 : G4VUserDetectorConstruction()
{}
S1DetectorConstruction::~S1DetectorConstruction(){
}

G4VPhysicalVolume* S1DetectorConstruction::Construct(){
//create world cube (l=5)	
	G4double world_hx = 5.0*m;
	G4double world_hy = 5.0*m;
	G4double world_hz = 5.0*m;
	G4Box* worldBox = new G4Box("World", world_hx, world_hy, world_hz);
	
	G4NistManager* man = G4NistManager::Instance();
	G4Material *Vacuum = man->FindOrBuildMaterial("G4_Galactic");
	G4LogicalVolume* worldLog = new G4LogicalVolume(worldBox, Vacuum, "World");

	G4VPhysicalVolume* fPhysWorld = new G4PVPlacement(0, G4ThreeVector(), worldLog, "World", 0, false, 0, true);
//create copper ball shifted +20cm x-axis (r=2mm)
	G4double rMax = 2.0*mm;

	G4Orb* copperBall = new G4Orb("CopperBall", rMax);
	
	G4Material *Cu = man->FindOrBuildMaterial("G4_Cu");
	G4LogicalVolume* ballLog = new G4LogicalVolume(copperBall, Cu, "Ball");

	G4double pos_x = 0.2*m;
	G4double pos_y = 0.0*m;
	G4double pos_z = 0.0*m;
	
	G4VPhysicalVolume* fPhysBall = new G4PVPlacement(0, G4ThreeVector(pos_x, pos_y, pos_z), ballLog, "Cu_Ball", worldLog, false, 0, true);
//create cube of NaI at origin
	G4double block_hx = 10.0*cm;
	G4double block_hy = 10.0*cm;
	G4double block_hz = 10.0*cm;
	G4Box* detectorBlock = new G4Box("Block", block_hx, block_hy, block_hz);

	//G4NistManager* man = G4NistManager::Instance();
	G4Material *NaI = man->FindOrBuildMaterial("G4_SODIUM_IODIDE");
	G4LogicalVolume* blockLog = new G4LogicalVolume(detectorBlock, NaI, "Block");

	pos_x = 0.0*m;
	pos_y = 0.0*m;
	pos_z = 0.0*m;

	fPhysBlock = new G4PVPlacement(0, G4ThreeVector(pos_x, pos_y, pos_z), blockLog, "NaI_Block", worldLog, false, 0, true);

return fPhysWorld;
}

