#include "S1EventAction.hh"
#include "S1RunAction.hh"
#include "S1Histo.hh"

#include "G4Event.hh"

S1EventAction::S1EventAction(S1RunAction* run, S1Histo* histo)
  : G4UserEventAction(), fRunAction(run), fHisto(histo),
    fTotalEnergy(0.), fEventModulo(0)
{
  fEventModulo = 100;
} 

S1EventAction::~S1EventAction()
{}

void S1EventAction::BeginOfEventAction(const G4Event*)
{    
  fTotalEnergy = 0.;
}

void S1EventAction::EndOfEventAction(const G4Event* anEvent)
{
  G4int eventNumber = anEvent->GetEventID();
  if (eventNumber%fEventModulo == 0)
    {
      G4cout << "\nThis marks the start of event " << eventNumber << G4endl;
    }
  fRunAction->FillPerEvent(fTotalEnergy);
  fHisto->FillHisto(fTotalEnergy);
  fHisto->FillNtuple(fTotalEnergy);
}
