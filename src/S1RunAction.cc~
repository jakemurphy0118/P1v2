#include "S1RunAction.hh"
#include "S1Histo.hh"

#include "G4Run.hh"
#include "G4RunManager.hh"
#include "G4UnitsTable.hh"

S1RunAction::S1RunAction(S1Histo* histo)
  : G4UserRunAction(), fHisto(histo), fSumTotalEnergy(0.)
{}

S1RunAction::~S1RunAction()
{}

void S1RunAction::BeginOfRunAction(const G4Run* aRun)
{
  G4cout << "### Run " << aRun->GetRunID() << " start." << G4endl;

  fSumTotalEnergy = 0.;

  fHisto->book();
}

void S1RunAction::FillPerEvent(G4double energyAddition)
{
  fSumTotalEnergy += energyAddition;
}

void S1RunAction::EndOfRunAction(const G4Run* aRun)
{
  G4int numberOfEvents = aRun->GetNumberOfEvent();
  if (numberOfEvents == 0) return;
    
  fHisto->PrintStatistic();
  fHisto->save();
}
